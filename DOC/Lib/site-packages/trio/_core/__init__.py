"""
This namespace represents the core functionality that has to be built-in
and deal with private internal data structures. Things in this namespace
are publicly available in either trio, trio.lowlevel, or trio.testing.
"""

import sys

from ._entry_queue import TrioToken
from ._ki import currently_ki_protected, disable_ki_protection, enable_ki_protection
from ._mock_clock import MockClock
from ._parking_lot import ParkingLot, ParkingLotStatistics

# Imports that always exist
from ._thread_cache import start_thread_soon

# Has to come after _run to resolve a circular import
from ._traps import (
    Abort,
    RaiseCancelT,
    cancel_shielded_checkpoint,
    permanently_detach_coroutine_object,
    reattach_detached_coroutine_object,
    temporarily_detach_coroutine_object,
    wait_task_rescheduled,
)
from ._unbounded_queue import UnboundedQueue, UnboundedQueueStatistics

# Windows imports
if sys.platform == "win32":
    pass
# Kqueue imports
elif sys.platform != "linux" and sys.platform != "win32":
    pass

del sys  # It would be better to import sys as _sys, but mypy does not understand it
